# Concept
本プロジェクトは、入手性が良く安価な部品で構成できる電気インピーダンストモグラフィ入門用ハードウエアを目指しています。<br>


本ハードウエアは、アナログフロントエンドのみを備えることを特徴とします。<br>
現在Webで公開されているオープンソースハードウエアは、データ取得部を含む物が大半です。<br>
これは便利ではあるのですが、サンプリング速度や上位系との通信が限定されてしまうので拡張が難しいという問題がありました。<br>

そこで本ボードでは、アナログフロントエンドのみを搭載することで処理系はユーザーが決めれるようになっています。
下記のようなユースケースに対応ができると考えています。

- BLEを使って無線経由で上位系にデータ送信したい
- 外部のロックインアンプで高精度計測したい
- 外部のファンクションジェネレータで励起信号の検討を行いたい 
- 使い慣れたMCU,FPGA,SoCで測定系を構成したい

# Progress
- [x] 回路設計
- [ ] AW設計
- [ ] 動作確認
- [ ] 解説ドキュメントの公開

# Hardware
スペックは、下記のとおりです。

- 最大16電極に対応
- 隣接電極法に対応
- アナログラインは±12V入力に対応



## Multiplexer
マルチプレクサは、電極励起パターンの切り替え、電位ポテンシャルの取得切り替えに使用されます。<br>
ここでは、Texas InstrumentsのTMUX4051(1.8V 互換ロジック、±12V、8:1)を採用しました。このICはGPIOによる簡単な制御、非常に安価、両電源駆動対応という特徴があります。<br>

マルチプレクサの制御は、I2CタイプのGPIOエクスパンダで実現しています。
ピンの引き出しは、PMODに準拠していますので、多くのマイコンボードを接続可能です。


## VCCS
電極励起のための交流定電流源になります。<br>
Enhanced Howland電流源という回路トポロジーを使用しています。



## Instrumentation Amplifier
電極ポテンシャルを計測するための初段アンプです。<br>
電極励起により発生するポテンシャルは、非常に微弱な信号であることから、入力インピーダンスが高い回路で受ける必要があります。
ここでは、計装アンプ回路


環境にもよりますが、直流成分による初段飽和が発生するかもしれません。ここでは飽和対策としてハイパスフィルタを実装しています。(使用しない際は、未実装としてショートしてください)

## Sub device
その他のコンポーネントとして温度センサ、EEPROMが実装されています。
電流源のキャリブレーションデータ、ファントム校正データなどを保存する用途に使用できます。
GPIOエクスパンダと同じI2Cバスに接続されているため、アドレス変更のみでアクセス可能です。

## Tank
タンクに使用した部品リストを示します。<br>


| 材料  | モノタロウ商品ID |単価[円]|個数|備考|
| ------------- | ------------- |--------------|--|--|
| 多目的ポット(14cm)  | 00444203  |919|1|水槽(大きさはお好み)|
| フランジボタンキャップ(12個入り)  | 41487153  |559|2|電極用|
|OリングS型固定用(NBR)|09511941|49|16|漏れ防止|
|基板用マウントパーツ(電源端子) HP-00424|11355137|1688|1|電極固定用|
|六角棒レンチセット|08478742|229|1|電極締め付け用|

# ver2 milestone

- クロスポイントスイッチの採用(ADG2128,CH446X)
- マルチプレクサユニットを拡張可能にする
- データ入力回路の並列化

# Other documents


# Ref
下記のオープンソースハードウエアを参考にしています。
- A Wearable Open-Source electrical impedance tomography device(2024)
- An open-source and easily replicable hardware for Electrical Impedance Tomography(2022)
- EIT-kit: An Electrical Impedance Tomography Toolkit for Health and Motion Sensing(2021)
